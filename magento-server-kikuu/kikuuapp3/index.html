<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Index</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <link href="css/assets.css" rel="stylesheet">
    <link href="css/common.css" rel="stylesheet">
</head>
<body>
<header class="header-index bar bar-nav out">
    <a class="menu-toggle icon fa fa-bars pull-left"></a>
    <a href="search.html" class="icon fa fa-search pull-left"></a>
    <a href="detail.html?title=My Shopping Cart&url=http://skymazon.sunpop.cn/checkout/cart/?fromui=app" id="cartIcon" class="icon fa fa-shopping-cart pull-right"></a>
    <a class="icon fa fa-qrcode pull-right qrcode"></a>
    <h2 class="title"><img src="images/logo.png" width="40%"></h2>
</header>

<div class="page-loading loading"></div>

<div class="header-index swiper-container swiper-pagination">
    <div class="swiper-wrapper">
    </div>
</div>

<div class="frame">
    <div id="pageWrapper">
        <div id="pageScroller">
        </div>
    </div>
</div>

<div class="tools none">
    <a href="http://skymazon.sunpop.cn/sales/order/history/?fromui=app" data-ajax="false">
        <i class="fa fa-user"></i>
    </a> |
    <a href="http://skymazon.sunpop.cn/wishlist/?fromui=app" data-ajax="false">
        <i class="fa fa-heart"></i>
    </a>
</div>

<div class="card cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" style="overflow: visible;">
    <h3>
        Menu
        <a class="icon icon-close pull-right menu-close"></a>
    </h3>
    <ul class="table-view cbp-spmenu-list">
    </ul>
</div>
<div class="menu-bottom"></div>

<!--Handlebars.js模版-->
<!--Handlebars.js模版放在script标签中，保留了html原有层次结构,模版中要写一些操作语句-->
<!--id可以用来唯一确定一个模版,type是模版固定的写法-->
<!--######菜单列表 ######-->
<script id="menu-template" type="text/x-handlebars-template">
    {{#each menus}}
    <li class="table-view-cell {{class_name}}"><a href="{{url}}">{{name}}</a></li>
    {{/each}}
</script>

<script id="slide-template" type="text/x-handlebars-template">
    {{#each menus}}
    <div id="{{id}}" class="page page-index out">
        <div class="scroller">
            <div class="pullDown">
                <span class="pullDownIcon"></span>
                <span class="pullDownLabel"></span>
            </div>
            <div class="products-grid"></div>
            <div class="pullUp">
                <span class="pullUpIcon"></span>
                <span class="pullUpLabel">Loading...</span>
            </div>
        </div>
    </div>
    {{/each}}
</script>

<!--######商品列表部分, 1column ######-->
<script id="item-template" type="text/x-handlebars-template">
    {{#each items}}
    <div class="item">
        <div class="item-inner">
            <a href="detail.html?title={{name}}&url={{url_key}}&share=true">
            <div class="product-image">
                <img class="lazy small-image" data-original="{{image_url}}" alt="{{name}}">
            </div>
            </a>

            <div class="product-info">
                <div class="product-name">
					<!--###### mobilebone会将不同的url处理为不同页，每个不同页生成一个div，故只使用一个url，用全局变量传产品id ######-->
                    <a href="productDetail.html?title=Product Detail" data-ajax="true" onclick="setProductId({{entity_id}})">
                    {{name}}</a>
                </div>

                <div class="product-price">
                    <div class="price-box">
                        <span class="special-price">
                            <span class="special-price">
                                <span class="price">${{final_price_with_tax}}</span> 
                                &nbsp;
                                <span class="old-price">${{regular_price_with_tax}}</span>
                            </span>
                        </span>
                        <span class="discount {{price_percent_class}}">
                            <span class="price">{{price_percent}}%</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{/each}}
</script>

<!-- 详情 rest 页 -->
<script id="productDetail-template" type="text/x-handlebars-template">
    {{#with product}}
		<div id="productDetail-{{entity_id}}">
			<!-- info -->
			<div class="product-name">{{name}}</a></div>
			<div class="price-box">			
				<span class="special-price">
					<span class="price-label">Special Price</span>
					<span class="price">${{final_price_with_tax}}</span>
					&nbsp;
				</span>
				<span class="old-price">${{regular_price_with_tax}}</span>
			</div>
			<p>{{{description}}}</p>
		</div>
    {{/with}}
</script>
		

<!-- 使用 cordova 插件要用到，不能删除 -->
<script src="cordova.js"></script>
<script src="js/assets.js"></script>
<script src="js/define.js"></script>
<script src="js/server.js"></script>
<script src="js/common.js"></script>
<script src="js/index.js"></script>
<script src="js/productdetail.js"></script>
</body>
</html>
